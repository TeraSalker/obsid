---
title: "ТЗ: Умный павербанк с SD-ридером и встроенным кабелем"
version: "v1.1"
---

# Функциональные требования

1. **Аккумулятор**
   - Ёмкость 5000–12000 мА·ч (Li-ion 21700 или pouch), BMS с защитой (перезаряд/переразряд/КЗ/перегрев).
   - Формат 1S (3.7 В номинал) + Step-up/Step-down (buck-boost).

2. **Подключение**
   - Один встроенный кабель USB-C (загнутый под углом, как у Anker Magnetic Card Reader).
   - Кабель обеспечивает:
     - Заряд телефона от павербанка (Power Role = Source, до 5/9/12 В).
     - Передачу данных с SD в телефон/ПК (Data Role = UFP — мы USB-устройство).
   - Один дополнительный порт USB-C на корпусе: для зарядки самого павербанка (Power Role = Sink, до 45–60 Вт PD).

3. **Накопители**
   - 2–3 слота для SD/microSD (лучше microSD с адаптерами).
   - Поддержка SDXC UHS-I (до 1 ТБ).
   - Горячая замена, индикация карты.
   - Хост видит отдельные диски или multi-LUN устройство.

4. **Магнитное кольцо (MagSafe style)**
   - Кольцо на корпусе для магнитного крепления к смартфону.
   - Заряд по Qi/MagSafe не обязателен, достаточно удержания.

5. **Индикация заряда**
   - Светодиодная полоска (5–10 сегментов, плавная анимация при зарядке/разрядке).
   - Дополнительно: кнопка проверки уровня (короткое нажатие — индикация).

---

# Технические требования

- **Питание**
  - Вход: PD до 20 В 2–3 А (для быстрой зарядки павербанка).
  - Выход: PD/QC профили 5 В 3 А, 9 В 2 А, 12 В 1.5–2.5 А.
- **Данные**
  - USB 3.1 Gen1 (5 Гбит/с), совместимость USB Mass Storage.
  - Поддержка UASP (для быстрой передачи).
- **Защита**
  - ESD, перегрев, токовое ограничение, отключение данных при аварии.
- **Контроллеры**
  - PD/DRP + USB mux (TI TPS25750 + HD3SS3220).
  - Заряд/разряд: BQ25798 или аналог.
  - Fuel gauge: MAX17055.
  - USB-хаб: VIA VL817 + SD-бриджи (Genesys/Realtek).
  - MCU: ESP32-S3 (управление, BLE, прошивка, индексация).

---

# UX и эргономика

- Компактный корпус (как обычный павербанк на 10 А·ч).
- Встроенный кабель USB-C: загнутый под углом, фиксируется в пазе.
- Разъём USB-C (IN) сбоку/снизу.
- Магнитное кольцо сзади, совместимое с MagSafe-аксессуарами.
- Диодная полоска на боковой грани.
- Кнопка (Mode): переключение режимов (Charge+Data / Only Charge / PC Mode).

---

# Примеры режимов работы

1. **Кабель → телефон**
   - Телефон заряжается (5–12 В PD).
   - Телефон видит SD как накопители.
2. **Кабель → ПК**
   - Павербанк заряжается (Sink).
   - ПК видит SD.
3. **Порт USB-C (IN) → зарядка**
   - Павербанк заряжается.
   - Данных нет.
4. **Два одновременных подключения (опция)**
   - IN → зарядка, OUT → телефон (зарядка телефона + доступ к SD, параллельно подзарядка самой банки).

---

# Дополнительные функции

- **Файл-менеджер**: удобное приложение для смартфона и ПК, позволяющее:
  - Просматривать файлы со всех карт единым деревом.
  - Копировать SD→SD или SD→телефон/ПК без стороннего софта.
  - Управлять режимами павербанка (Charge+Data, Only Charge, PC Mode).
  - Следить за состоянием батареи и температурой.
- **Зарядная станция (док-станция)**:
  - Возможность подключения павербанка в док для одновременной подзарядки и работы как кардридера/накопителя.
  - Поддержка сквозного питания: док заряжает павербанк, а тот — телефон.

---

# Эстетика и дизайн

- За основу взять минимализм Anker Magnetic Card Reader (угловой кабель, чистый корпус).
- Матовый пластик + алюминиевая рамка для теплоотвода.
- Опционально OLED-дисплей (уровень заряда, мощность PD, активные карты).
